<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Sản Phẩm - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ====================================================================
            I. CĂN CHỈNH CHUNG VÀ CƠ SỞ
            ==================================================================== */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 30px; 
            background-color: #f0f2f5;
            color: #333;
        }

        .container {
            max-width: 1200px; 
            margin: auto;
        }

        :root {
            --primary-color: #007bff; 
            --success-color: #28a745;
            --danger-color: #dc3545;
            --light-bg: #e9ecef; 
            --border-color: #dee2e6;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        /* ====================================================================
            II. HEADER & BUTTONS
            ==================================================================== */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px; 
        }

        .header-title {
            font-size: 2em;
            font-weight: 600;
            color: #212529;
        }

        .action-buttons button {
            padding: 10px 20px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            margin-left: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            color:#007bff
        }
        
        .add-product-btn {  
            color: blue; 
        }
        .add-product-btn:hover { 
            
            transform: translateY(-1px);
        }

        /* ====================================================================
            III. CONTROL BAR (Search, Filter, Sort)
            ĐÃ CHỈNH SỬA CHO FORM
            ==================================================================== */
        .control-bar {
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        /* Cấu hình Search Box (Input) */
        .search-box {
            width: 45%; 
            position: relative;
            flex-shrink: 0; 
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            display: block; 
        }

        #search-input {
            width: 100%;
            padding: 12px 15px 12px 45px; 
            border: 1px solid var(--border-color);
            border-radius: 8px; 
            font-size: 1em;
            transition: border-color 0.2s;
        }
        
        #search-input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        /* Hết cấu hình Search Box */

        .filter-group label {
            font-weight: 600;
            color: #6c757d;
            margin-right: 10px;
        }
        
        .filter-group select {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            min-width: 150px;
        }

        .control-bar .filter-group {
            flex-shrink: 0;
            margin-left: auto; 
            display: flex;
            align-items: center;
        }
        
        /* NÚT TÌM KIẾM MỚI Ở CUỐI CÙNG */
        #search-button-end {
            padding: 12px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px; 
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
            white-space: nowrap; 
            display: flex;
            align-items: center;
            gap: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-left: 20px; 
        }
        
        #search-button-end:hover {
            background-color: #0056b3;
        }

        /* ====================================================================
            IV. BẢNG SẢN PHẨM (Giữ nguyên)
            ==================================================================== */
        .product-table-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow-x: auto;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
        }

        .product-table th, .product-table td {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .product-table th {
            background-color: var(--light-bg);
            color: #495057;
            font-weight: 700;
            font-size: 0.95em;
            text-transform: uppercase;
        }
        
        .product-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        /* Căn chỉnh cột */
        .col-id { width: 60px; text-align: center; }
        .col-image { width: 80px; text-align: center; }
        .col-price { width: 140px; text-align: right; }
        .col-stock { width: 100px; text-align: right; }
        .col-status { width: 100px; text-align: center; }
        .col-actions { 
            width: 180px; 
            text-align: center; 
            white-space: nowrap; 
        } 

        /* Hiển thị hình ảnh */
        .product-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 6px;
        }

        /* Thẻ trạng thái */
        .status-tag {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            text-align: center;
        }
        .status-in-stock { background-color: #d4edda; color: var(--success-color); }
        .status-low-stock { background-color: #fff3cd; color: #ffc107; }
        .status-out-stock { background-color: #f8d7da; color: var(--danger-color); }

        /* CÁC NÚT HÀNH ĐỘNG */
        .action-link {
            display: inline-flex; 
            align-items: center;
            justify-content: center;
            padding: 5px 12px; 
            text-decoration: none;
            font-size: 0.9em;
            font-weight: 600; 
            border-radius: 4px;
            transition: opacity 0.2s, background-color 0.2s;
            border: none; 
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); 
            cursor: pointer; 
            gap: 5px; 
        }

        /* Nút Sửa: Màu vàng */
        .action-link.edit {
            margin-right: 8px; 
            background-color: #ffc107; 
            color: #333; 
        }
        .action-link.edit:hover {
            background-color: #e0a800; 
            opacity: 0.9;
        }

        /* Nút Xóa: Màu đỏ */
        .action-link.delete {
            background-color: var(--danger-color); 
            color: white; 
        }
        .action-link.delete:hover {
            background-color: #c82333; 
            opacity: 0.9;
        }
        
        .action-link i {
            margin-right: 0; 
            display: inline-block; 
            font-size: 1em; 
        }

        /* Cột giá và tồn kho */
        .col-price { font-weight: 600; color: #333; }
        .col-stock.low { color: var(--danger-color); font-weight: 700; }

        /* ====================================================================
            V. PAGINATION (Phân trang - Giữ nguyên)
            ==================================================================== */
        .pagination-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .pagination-controls button {
            padding: 8px 15px;
            margin: 0 4px;
            border: 1px solid var(--border-color);
            background-color: white;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .pagination-controls button:hover:not(:disabled) {
            background-color: var(--primary-color);
            color: white;
        }
        
        .pagination-controls button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .pagination-controls .active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        a{
            text-decoration-line: none;
        }
    </style>
</head>
<body>
<div class="container">

    <div style="margin-bottom: 15px;">
        <a href="adminnew.html" 
            style="padding: 10px 20px; background-color: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
            <i class="fas fa-arrow-left"></i> Quay Về
        </a>
    </div>

    <div class="container">
        
        <div class="page-header">
            <h1 class="header-title">Quản Lý Sản Phẩm</h1>
            <div class="action-buttons">
                <a class="add-product-btn" href="themsanpham.html">
                    <i class="fas fa-plus-circle"></i> Thêm Sản Phẩm Mới
                </a>
            </div>
        </div>

        <form action="timkiemsanpham.html" method="GET" class="control-bar">
            <div class="search-box">
                <i class="fas fa-search"></i> 
                <input type="text" id="search-input" name="search_name" placeholder="Tìm kiếm theo Tên Sản Phẩm...">
            </div>
            
            <div class="filter-group">
                <label for="stock-filter">Trạng Thái Tồn Kho:</label>
                <select id="stock-filter" name="stock_status">
                    <option value="all">Tất cả</option>
                    <option value="instock">Còn Hàng</option>
                    <option value="lowstock">Sắp Hết</option>
                    <option value="outofstock">Hết Hàng</option>
                </select>
            </div>
            
            <button id="search-button-end" type="submit">
                <i class="fas fa-search"></i> Tìm Kiếm
            </button>
        </form>

        <div class="product-table-container">
            <table class="product-table">
                <thead>
                    <tr>
                        <th class="col-id">STT</th>
                        <th class="col-image">Ảnh</th>
                        <th>Tên Sản Phẩm</th>
                        <th class="col-price">Giá Bán</th>
                        <th class="col-stock">Tồn Kho</th>
                        <th class="col-status">Trạng Thái</th>
                        <th class="col-actions">Thao Tác</th>
                    </tr>
                </thead>
                <tbody id="product-list">
                    <tr data-id="101">
                        <td class="col-id">1</td>
                        <td><img src="./assets/img/product/item-1.png" alt="Product A" class="product-img" /></td>
                        <td>Hạt cà phê Lavazza</td>
                        <td class="col-price">350.000₫</td>
                        <td class="col-stock">150</td>
                        <td class="col-status"><span class="status-tag status-in-stock">Còn hàng</span></td>
                        <td class="col-actions">
                            <a class="action-link edit" href="chitiet.html">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <a class="action-link delete" onclick="deleteProduct(this, 101)">
                                <i class="fas fa-trash-alt"></i> Xóa
                            </a>
                        </td>
                    </tr>
                    <tr data-id="102">
                        <td class="col-id">2</td>
                       <td><img src="./assets/img/product/item-2.png" alt="Product B" class="product-img" /></td>
                        <td>Hạt cà phê Epresso</td>
                        <td class="col-price">1.200.000₫</td>
                        <td class="col-stock low">15</td>
                        <td class="col-status"><span class="status-tag status-low-stock">Sắp hết</span></td>
                        <td class="col-actions">
                            <a class="action-link edit" href="chitiet.html">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <a class="action-link delete" onclick="deleteProduct(this, 102)">
                                <i class="fas fa-trash-alt"></i> Xóa
                            </a>
                        </td>
                    </tr>
                    <tr data-id="103">
                        <td class="col-id">3</td>
                        <td><img src="./assets/img/product/item-3.png" alt="Product C" class="product-img" /></td>
                        <td>Hạt cà phê Abrica</td>
                        <td class="col-price">4.500.000₫</td>
                        <td class="col-stock">0</td>
                        <td class="col-status"><span class="status-tag status-out-stock">Hết hàng</span></td>
                        <td class="col-actions">
                            <a class="action-link edit" href="chitiet.html">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <a class="action-link delete" onclick="deleteProduct(this, 103)">
                                <i class="fas fa-trash-alt"></i> Xóa
                            </a>
                        </td>
                    </tr>
                    <tr data-id="104">
                        <td class="col-id">4</td>
                        <td><img src="./assets/img/product/item-4.png" alt="Product D" class="product-img" /></td>
                        <td>Cà phê nguyên chất</td>
                        <td class="col-price">250.000₫</td>
                        <td class="col-stock">75</td>
                        <td class="col-status"><span class="status-tag status-in-stock">Còn hàng</span></td>
                        <td class="col-actions">
                            <a class="action-link edit" href="chitiet.html">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <a class="action-link delete" onclick="deleteProduct(this, 104)">
                                <i class="fas fa-trash-alt"></i> Xóa
                            </a>
                        </td>
                    </tr>
                    <tr data-id="105">
                        <td class="col-id">5</td>
                        <td><img src="./assets/img/product/item-5.png" alt="Product E" class="product-img" /></td>
                        <td>Cà phê truyền thống </td>
                        <td class="col-price">480.000₫</td>
                        <td class="col-stock low">5</td>
                        <td class="col-status"><span class="status-tag status-low-stock">Sắp hết</span></td>
                        <td class="col-actions">
                            <a class="action-link edit" href="chitiet.html">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <a class="action-link delete" onclick="deleteProduct(this, 105)">
                                <i class="fas fa-trash-alt"></i> Xóa
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="pagination-footer">
            <span id="product-count-display">Hiển thị 1 đến 5 trên tổng số 5 sản phẩm</span>
            <div class="pagination-controls">
                <button disabled>Trước</button>
                <button class="active">1</button>
                <button>Sau</button>
            </div>
        </div>

    </div>
    
    <script>
        // CÁC HÀM LỌC BỊ XÓA HOẶC VÔ HIỆU HÓA ĐỂ CHO PHÉP CHUYỂN TRANG BẰNG FORM SUBMIT.
        // Chỉ giữ lại hàm deleteProduct()

        function updateProductCount(visibleCount) {
             const totalProducts = document.getElementById('product-list').getElementsByTagName('tr').length;
             const displayElement = document.getElementById('product-count-display');
            
             if (visibleCount === 0) {
                  displayElement.textContent = `Không tìm thấy sản phẩm nào.`;
             } else {
                  displayElement.textContent = `Hiển thị 1 đến ${visibleCount} trên tổng số ${totalProducts} sản phẩm`;
             }
         }


        function deleteProduct(buttonElement, id) {
            if (confirm(`Bạn có chắc chắn muốn XÓA Sản phẩm ID: ${id}?`)) {
                const row = buttonElement.closest('tr');
                
                if (row) {
                    row.remove();
                    alert(`Đã xóa Sản phẩm ID: ${id} khỏi bảng.`);
                    
                    // Cần cập nhật lại số lượng sau khi xóa
                    const productList = document.getElementById('product-list');
                    const currentVisibleRows = Array.from(productList.children).length; // Dùng length vì không còn lọc ẩn/hiện
                    updateProductCount(currentVisibleRows);
                }
            }
        }
        
        // Khởi tạo số lượng sản phẩm khi load trang
        document.addEventListener('DOMContentLoaded', () => {
             const totalProducts = document.getElementById('product-list').getElementsByTagName('tr').length;
             updateProductCount(totalProducts);
        });

    </script>
</body>
</html>
